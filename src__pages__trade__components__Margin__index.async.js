"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3799],{87603:function(de,T,n){n.d(T,{Z:function(){return $}});var y=n(1413),c=n(67294),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},Z=b,E=n(84089),M=function(r,w){return c.createElement(E.Z,(0,y.Z)((0,y.Z)({},r),{},{ref:w,icon:Z}))};M.displayName="ArrowRightOutlined";var $=c.forwardRef(M)},79886:function(de,T,n){n.r(T),n.d(T,{default:function(){return Se}});var y=n(97857),c=n.n(y),b=n(15009),Z=n.n(b),E=n(99289),M=n.n(E),$=n(5574),i=n.n($),r=n(67294),w=n(75302),ce=n(92195),X=n(27790),A=n(71230),u=n(15746),ue=n(57953),p=n(7075),he=n(8229),B=n(41687),z=n(87603),ve=n(12699),ge=n(93417),R=n(6377),me=n(90494),fe=n(21035),e=n(85893),$e=w.ZP.useBreakpoint,J=function(s){var t=s.currentPostion,o=s.actionType,L=s.onClose,j=(0,B.useModel)("chain"),g=j.chain,P=j.wallet,k=(0,B.useModel)("future"),Ce=k.updatePositions,Te=k.setPairsLoading,ye=(0,B.useIntl)(),m=ye.formatMessage,Ze=ce.Z.useToken(),S=Ze.token.colorTextSecondary,Q=t.userMargin,C=t.collateralTokenObj,F=t.indexTokenObj,Y=t.isLong,Me=t.pair,Ae=t.userLiqPrice;if(!C||!F||!Me||!g||!P)return(0,e.jsx)(e.Fragment,{});var D=C.userTokenBalance,pe=(0,r.useState)(!1),q=i()(pe,2),Re=q[0],I=q[1],Le=(0,r.useState)(0),_=i()(Le,2),f=_[0],Pe=_[1],ke=(0,r.useState)(""),ee=i()(ke,2),ne=ee[0],te=ee[1],Ie=(0,r.useState)(),ae=i()(Ie,2),v=ae[0],Ne=ae[1],Oe=(0,r.useState)(),re=i()(Oe,2),se=re[0],N=re[1],G=(0,r.useMemo)(function(){return o==="remove"?(0,R.xu)(t):"0"},[o]);(0,r.useEffect)(function(){var l=(0,R.tm)({isAdd:o==="add",currentPostion:t,amountIn:String(f)}),d=i()(l,2),x=d[0],h=d[1];if(h){console.log(h.error),te(h.error);return}Ne(x),te("")},[t,f]);var V=function(d){Pe(d)},be=function(){var l=M()(Z()().mark(function d(){var x,h,oe,H,ie,U,le,W;return Z()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(I(!0),o!=="add"){a.next=15;break}return a.next=4,(0,R.Ue)({chain:g,wallet:P,collateralToken:C,indexToken:F.id,isLong:Y,amountIn:String(f)});case 4:if(x=a.sent,h=i()(x,2),oe=h[0],H=h[1],!H){a.next=12;break}return X.ZP.error(H.error),I(!1),a.abrupt("return");case 12:N({show:!0,onClose:function(){N(void 0)},type:"addMargin",title:"Add Margin Success",hash:oe.hash,okText:"Close"}),a.next=26;break;case 15:return a.next=17,(0,R.CL)({chain:g,wallet:P,collateralToken:C,indexToken:F.id,isLong:Y,amountIn:String(f)});case 17:if(ie=a.sent,U=i()(ie,2),le=U[0],W=U[1],!W){a.next=25;break}return X.ZP.error(W.error),I(!1),a.abrupt("return");case 25:N({show:!0,onClose:function(){N(void 0),L()},type:"removeMargin",title:"Remove Margin Success",hash:le.hash,okText:"Close"});case 26:return Te(!0),a.next=29,Ce();case 29:I(!1);case 30:case"end":return a.stop()}},d)}));return function(){return l.apply(this,arguments)}}(),O=function(d){var x=d.label,h=d.children;return(0,e.jsxs)(A.Z,{className:"InputCardTip",style:{fontSize:13,color:S},children:[(0,e.jsx)(u.Z,{children:x}),(0,e.jsx)(u.Z,{children:h})]})};return(0,e.jsxs)(ue.Z,{spinning:Re,children:[(0,e.jsxs)(A.Z,{gutter:[10,10],className:"hayMarginWrap",children:[(0,e.jsx)(u.Z,{span:24,children:(0,e.jsx)(me.Z,{tokenList:[],currentToken:C,onTokenChange:function(){},canSelectToken:!1,amount:f,onAmountChange:V,minValue:0,maxValue:Number(o==="add"?D:G),header:o==="add"?(0,e.jsxs)("div",{className:"label",children:[(0,e.jsxs)(p.Z.Text,{style:{color:S,fontSize:13},children:[m({id:"current_margin"}),": $",Q]}),(0,e.jsxs)(p.Z.Text,{style:{color:S,fontSize:13},children:[m({id:"wallet_bal"}),":\xA0",(0,e.jsx)("span",{className:"linkColor",onClick:function(){return V(Number(D))},children:D})]})]}):(0,e.jsxs)("div",{className:"label",children:[(0,e.jsxs)(p.Z.Text,{style:{color:S,fontSize:13},children:[m({id:"max_removable"}),":",(0,e.jsx)("span",{className:"linkColor",onClick:function(){return V(parseFloat(G))},children:G})]}),(0,e.jsxs)(p.Z.Text,{style:{color:S,fontSize:13},children:[m({id:"current_margin"}),": ",Q]})]})})}),(0,e.jsx)(u.Z,{span:24,children:v&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(O,{label:"Leverage",children:[v.oldLeverage," ",(0,e.jsx)(z.Z,{})," ",v.newLeverage]}),(0,e.jsxs)(O,{label:"Margin Rate",children:[v.oldMr," ",(0,e.jsx)(z.Z,{})," ",v.newMr]}),(0,e.jsx)(O,{label:"Maintenance Margin Rate",children:v.mmr}),(0,e.jsxs)(O,{label:"EST Liq. Price",children:["$",Ae," ",(0,e.jsx)(z.Z,{}),"  $",v.newLiqPrice]})]})}),(0,e.jsx)(u.Z,{span:24,children:(0,e.jsx)(ve.Z,{height:50,onClick:be,conditions:[{condition:!!ne,text:ne,type:"default",onClick:function(){}},{condition:!f,text:"Enter Amount",type:"default",onClick:function(){}}],children:m(o==="add"?{id:"incrase_margin"}:{id:"withdraw_margin"})})})]}),se&&(0,e.jsx)(fe.Z,c()({},se))]})},xe=function(s){var t=s.defaultAction,o=(0,r.useState)(),L=i()(o,2),j=L[0],g=L[1];return(0,r.useEffect)(function(){g(t)},[t]),(0,e.jsxs)(A.Z,{gutter:[10,10],className:"Borrow-Comp",children:[(0,e.jsx)(u.Z,{span:"24",children:(0,e.jsx)(he.Z,{style:{width:"100%"},value:j,onChange:function(k){return g(k)},block:!0,options:[{label:(0,e.jsx)("div",{style:{padding:4},children:(0,e.jsx)("div",{children:"Add Margin"})}),value:"add"},{label:(0,e.jsx)("div",{style:{padding:4},children:(0,e.jsx)("div",{children:"Remove Margin"})}),value:"remove"}]})}),(0,e.jsx)(u.Z,{span:"24",style:{overflow:"hidden"},children:(0,e.jsxs)(A.Z,{wrap:!1,gutter:[20,20],style:{transform:"translateX(".concat(j==="add"?"0":"-100","%)"),transition:"transform .4s ease-in-out"},children:[(0,e.jsx)(u.Z,{span:"24",children:(0,e.jsx)(J,c()(c()({},s),{},{actionType:"add"}))}),(0,e.jsx)(u.Z,{span:"24",children:(0,e.jsx)(J,c()(c()({},s),{},{actionType:"remove"}))})]})})]})},je=function(s){var t=s.show,o=s.onClose;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ge.Z,{show:t,onClose:o,closable:!0,maskClosable:!1,title:"Edit Margin",children:(0,e.jsx)(xe,c()({},s))})})},Se=je}}]);
