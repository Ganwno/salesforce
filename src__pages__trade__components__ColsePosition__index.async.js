"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1306],{87603:function(re,Z,n){n.d(Z,{Z:function(){return z}});var p=n(1413),j=n(67294),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},o=N,M=n(84089),C=function(O,r){return j.createElement(M.Z,(0,p.Z)((0,p.Z)({},O),{},{ref:r,icon:o}))};C.displayName="ArrowRightOutlined";var z=j.forwardRef(C)},30436:function(re,Z,n){n.r(Z),n.d(Z,{default:function(){return ye}});var p=n(13769),j=n.n(p),N=n(97857),o=n.n(N),M=n(15009),C=n.n(M),z=n(99289),F=n.n(z),O=n(5574),r=n.n(O),l=n(67294),ae=n(75302),A=n(71230),a=n(15746),ie=n(92195),le=n(27790),ce=n(57953),u=n(7075),ue=n(8229),B=n(41687),de=n(87603),he=n(12699),ve=n(93417),fe=n(66419),G=n(6377),xe=n(21035),me=n(90494),e=n(85893),ge=["defaultAction"],je=["show","onClose"],be=ae.ZP.useBreakpoint,x=function(s){var t=s.label,c=s.children;return(0,e.jsxs)(A.Z,{className:"InputCardTip",style:{fontSize:13},children:[(0,e.jsx)(a.Z,{children:t}),(0,e.jsx)(a.Z,{children:c})]})},V=function(s){var t=s.currentPostion,c=s.actionType,m=(0,B.useModel)("chain"),S=m.chain,y=m.wallet,P=(0,B.useModel)("future"),H=P.updatePositions,$=P.setPairsLoading,Pe=(0,B.useIntl)(),U=Pe.formatMessage,Te=t.userMargin,b=t.collateralTokenObj,X=t.indexTokenObj,J=t.isLong,I=t.pair,Ee=t.userLiqPrice,De=t.size,Ze=t.userSize;if(!b||!X||!I||!S||!y)return(0,e.jsx)(e.Fragment,{});var We=b.userTokenBalance,pe=(0,l.useState)(!1),K=r()(pe,2),Ae=K[0],k=K[1],Re=(0,l.useState)(0),Q=r()(Re,2),g=Q[0],Ie=Q[1],Le=(0,l.useState)(""),Y=r()(Le,2),w=Y[0],q=Y[1],Ne=ie.Z.useToken(),_=Ne.token,Me=_.colorInfoBg,L=_.colorTextSecondary,ze=(0,l.useState)(),ee=r()(ze,2),i=ee[0],Oe=ee[1],Be=(0,l.useState)(),ne=r()(Be,2),te=ne[0],se=ne[1],E=(0,l.useMemo)(function(){return c==="close"?Ze:"0"},[c]);(0,l.useEffect)(function(){var d=(0,G.oD)({currentPostion:t,amountIn:String(g)}),v=r()(d,2),T=v[0],f=v[1];if(f){console.log(f.error),q(f.error);return}T&&Oe(T),q("")},[t,g]);var oe=function(v){Ie(v)},$e=function(){var d=F()(C()().mark(function v(){var T,f,D,W;return C()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return k(!0),h.next=3,(0,G.O0)({chain:S,wallet:y,isLong:J,amountIn:g,currentPosition:t});case 3:if(T=h.sent,f=r()(T,2),D=f[0],W=f[1],!W){h.next=11;break}return le.ZP.error(W.error),k(!1),h.abrupt("return");case 11:return D&&se({show:!0,onClose:function(){se(void 0)},type:"closePosition",title:"Close Position Success",hash:D.hash,okText:"Close"}),$(!0),h.next=15,H();case 15:k(!1);case 16:case"end":return h.stop()}},v)}));return function(){return d.apply(this,arguments)}}();return(0,e.jsxs)(ce.Z,{spinning:Ae,children:[(0,e.jsxs)(A.Z,{gutter:[10,10],className:"hayMarginWrap",children:[(0,e.jsx)(a.Z,{span:24,className:"card",children:(0,e.jsx)(me.Z,{tokenList:[],currentToken:X,onTokenChange:function(){},canSelectToken:!1,amount:g,onAmountChange:oe,minValue:0,maxValue:Number(E),header:(0,e.jsxs)("div",{className:"label",children:[(0,e.jsxs)(u.Z.Text,{style:{fontSize:12,color:L},children:[U({id:"close"})," ",J?"Long":"Short",": $",(0,fe.Ce)(g,Number(I.userIndexPrice))]}),(0,e.jsxs)(u.Z.Text,{style:{fontSize:12,color:L},children:[U({id:"position_size"}),":\xA0",(0,e.jsx)("span",{className:"primary",onClick:function(){return oe(Number(E))},children:E})]})]})})}),(0,e.jsx)(a.Z,{span:24,className:"card",children:(0,e.jsxs)("div",{className:"hayInputCard",style:{background:Me},children:[(0,e.jsxs)("div",{className:"label",children:[(0,e.jsx)(u.Z.Text,{style:{fontSize:12,color:L},children:" Price"}),(0,e.jsxs)(u.Z.Text,{style:{fontSize:12,color:L},children:["Mark:",I.userIndexPrice,"  "]})]}),(0,e.jsxs)("div",{className:"value",children:[(0,e.jsxs)(u.Z.Text,{style:{fontSize:24,fontWeight:500},children:[" ",I.userIndexPrice]}),(0,e.jsx)(u.Z.Text,{style:{fontSize:24,fontWeight:500},children:" USD"})]})]})}),(0,e.jsx)(a.Z,{span:24,children:i&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x,{label:"PnL/ROE",children:(0,e.jsxs)(u.Z.Text,{className:i.isPositive?"linkColor":"shortColor",children:[i.pnlStr,"/",i.roeStr]})}),(0,e.jsx)(x,{label:"Leverage",children:i.leverage}),(0,e.jsxs)(x,{label:"Margin",children:[Te," ",(0,e.jsx)(de.Z,{}),"  $",i.leftMargin]}),(0,e.jsx)(x,{label:"Margin Rate",children:i.mr}),(0,e.jsxs)(x,{label:"EST Liquidation Price",children:["$",i.liqPrice]}),(0,e.jsx)(x,{label:"Receive",children:(0,e.jsxs)(u.Z.Text,{className:i.isPositive?"linkColor":"shortColor",children:[i.receive," In ",b.symbol]})})]})}),(0,e.jsx)(a.Z,{span:24,children:(0,e.jsx)(he.Z,{height:50,onClick:$e,conditions:[{condition:!!w,text:w,type:"default",onClick:function(){}},{condition:!g,text:"Enter Amount",type:"default",onClick:function(){}}],children:"Close Position"})})]}),te&&(0,e.jsx)(xe.Z,o()({},te))]})},ke=function(){return _jsx(Row,{gutter:[10,10],children:"Rem,ove"})},Ce=function(s){var t=s.defaultAction,c=j()(s,ge),m=(0,l.useState)(),S=r()(m,2),y=S[0],P=S[1];return(0,l.useEffect)(function(){P(t)},[t]),(0,e.jsxs)(A.Z,{gutter:[10,10],className:"Borrow-Comp",children:[(0,e.jsx)(a.Z,{span:"24",children:(0,e.jsx)(ue.Z,{style:{width:"100%"},value:y,onChange:function($){return P($)},block:!0,options:[{label:(0,e.jsx)("div",{style:{padding:4},children:(0,e.jsx)("div",{children:"TP/SL"})}),value:"tpsl",disabled:!0},{label:(0,e.jsx)("div",{style:{padding:4},children:(0,e.jsx)("div",{children:"Close Position"})}),value:"close"}]})}),(0,e.jsx)(a.Z,{span:"24",style:{overflow:"hidden"},children:(0,e.jsxs)(A.Z,{wrap:!1,gutter:[20,20],style:{transform:"translateX(".concat(y==="tpsl"?"0":"-100","%)"),transition:"transform .4s ease-in-out"},children:[(0,e.jsx)(a.Z,{span:"24",children:(0,e.jsx)(V,o()(o()({},o()({},c)),{},{actionType:"tpsl"}))}),(0,e.jsx)(a.Z,{span:"24",children:(0,e.jsx)(V,o()(o()({},o()({},c)),{},{actionType:"close"}))})]})})]})},Se=function(s){var t=s.show,c=s.onClose,m=j()(s,je);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ve.Z,{show:t,onClose:c,closable:!0,maskClosable:!1,title:"Colse Position",children:(0,e.jsx)(Ce,o()({},m))})})},ye=Se}}]);
