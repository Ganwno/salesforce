"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1489],{85940:function(ge,p,e){e.r(p),e.d(p,{default:function(){return J}});var K=e(97857),S=e.n(K),O=e(5574),u=e.n(O),U=e(75302),b=e(92195),T=e(7075),V=e(71577),C=e(76870),i=e(41687),d=e(80331),X=e(36913),H=e(37373),N=e(13596),g=e(83630),v=e(67294),a=e(85893),h=U.ZP.useBreakpoint;function J(){var P=(0,i.useModel)("chain"),Q=P.stakeInfoList,w=(0,i.useIntl)(),f=w.formatMessage,q=b.Z.useToken(),_=q.token.colorInfoBg,t=(0,v.useState)(),R=u()(t,2),Z=R[0],ke=R[1],D=(0,v.useState)(),L=u()(D,2),k=L[0],z=L[1],W=h(),c=W.md,y={conf:{cardName:(0,a.jsx)(T.Z.Text,{style:{fontSize:24,fontWeight:500},children:f({id:"borrow_mining"})}),rowKey:"id",header:{title:(0,a.jsx)(T.Z.Text,{style:{fontSize:16,fontWeight:500},children:f({id:"borrow_mining"})}),dataIndex:"stake",key:"stake",render:function(r,n){return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(d.Z,{src:n.iconLp,tokenId:n.id}),(0,a.jsx)(T.Z.Text,{style:{fontSize:16,fontWeight:500,marginLeft:6},children:n.symbol})]})}},desc:[{title:f({id:"total_borrowed"}),dataIndex:"poolDebt",key:"poolDebt",align:"right",render:function(r,n){return(0,a.jsx)(C.Z,{value:r,suffix:n.symbol})}},{title:f({id:"your_borrow"}),dataIndex:"userDebt",key:"userDebt",align:"right",render:function(r,n){return(0,a.jsx)(C.Z,{value:r,suffix:n.symbol})}},{title:"24".concat(f({id:"h_yield"})),dataIndex:"userBorrowDayStaked",key:"userBorrowDayStaked",align:"right",render:function(r){return(0,a.jsx)("div",{className:"yield_wrap",children:(0,a.jsxs)("div",{className:"yield",style:{background:_},children:[(0,a.jsx)("img",{src:H.Z,className:"yield_icon"}),(0,a.jsx)(C.Z,{value:r})]})})}},{title:f({id:"apr"}),dataIndex:"borrowYieldApr",key:"borrowYieldApr",align:"right"}],edit:[{title:"Total yield",dataIndex:"yield",key:"yield",align:"center",render:function(r,n){var m=n.userAccountBorrowYield;return(0,a.jsxs)(V.Z,{type:c?"link":"primary",disabled:parseFloat(n.userAccountBorrowYield)<=0,onClick:function(){z({amount:m,onClose:function(){return z(void 0)},show:!0,current:n,title:"Borrow Yield",type:"borrow"})},children:[m||0," OT"]})}}]},list:Q};return(0,a.jsxs)("div",{className:"stakeTableWrap",children:[(0,a.jsx)(X.Z,S()({},y)),Z&&(0,v.createElement)(N.default,S()(S()({},Z),{},{key:Z.currentStake.id})),k&&(0,v.createElement)(g.default,S()(S()({},k),{},{key:k.current&&k.current.id}))]})}},13596:function(ge,p,e){e.r(p),e.d(p,{default:function(){return z}});var K=e(13769),S=e.n(K),O=e(97857),u=e.n(O),U=e(15009),b=e.n(U),T=e(99289),V=e.n(T),C=e(5574),i=e.n(C),d=e(67294),X=e(75302),H=e(92195),N=e(27790),g=e(71230),v=e(7075),a=e(57953),h=e(15746),J=e(31530),P=e(41687),Q=e(12699),w=e(93417),f=e(6377),q=e(90494),_=e(21035),t=e(85893),R=["defaultAction"],Z=["show","onClose"],ke=X.ZP.useBreakpoint,D=function(c){var y=c.currentStake,s=c.actionType,r=(0,P.useModel)("chain"),n=r.chain,m=r.wallet,A=r.updateStake,ee=r.stakeInfoList,te=H.Z.useToken(),I=te.token,$=I.colorTextSecondary,ie=I.fontSizeSM,pe=I.colorInfoBg,Te=I.borderRadius,Ce=I.paddingSM,Ze=(0,P.useIntl)(),de=Ze.formatMessage;if(!n||!m)return(0,t.jsx)(t.Fragment,{});var Ae=(0,d.useState)(!1),ue=i()(Ae,2),Ie=ue[0],Y=ue[1],Be=(0,d.useState)(0),ce=i()(Be,2),B=ce[0],Me=ce[1],be=(0,d.useState)(""),he=i()(be,2),ve=he[0],Ne=he[1],Pe=(0,d.useState)(y),fe=i()(Pe,2),o=fe[0],Re=fe[1],De=(0,d.useState)(),me=i()(De,2),$e=me[0],Ye=me[1],Le=(0,d.useState)(),xe=i()(Le,2),Se=xe[0],E=xe[1],F=(0,d.useMemo)(function(){return Number(s==="remove"?o.userAccountStaked:o.userLpBalance)},[s,o]);(0,d.useEffect)(function(){Ne("")},[o,B]);var ye=function(x){Me(x)},ze=function(){var j=V()(b()().mark(function x(){var G,M,ae,re,je,se,oe,le;return b()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(Y(!0),s!=="add"){l.next=15;break}return l.next=4,(0,f.LK)({chain:n,wallet:m,stakeItem:o,amountIn:B});case 4:if(G=l.sent,M=i()(G,2),ae=M[0],re=M[1],!re){l.next=12;break}return N.ZP.error(re.error),Y(!1),l.abrupt("return");case 12:ae&&E({show:!0,onClose:function(){E(void 0)},type:"addMargin",title:"Stake Success",hash:ae.hash,okText:"Close"}),l.next=26;break;case 15:return l.next=17,(0,f.fD)({chain:n,wallet:m,stakeItem:o,amountIn:B});case 17:if(je=l.sent,se=i()(je,2),oe=se[0],le=se[1],!le){l.next=25;break}return N.ZP.error(le.error),Y(!1),l.abrupt("return");case 25:oe&&E({show:!0,onClose:function(){E(void 0)},type:"removeMargin",title:"Unstake Success",hash:oe.hash,okText:"Close"});case 26:return l.next=28,A();case 28:Y(!1);case 29:case"end":return l.stop()}},x)}));return function(){return j.apply(this,arguments)}}(),ne=function(x){var G=x.label,M=x.children;return(0,t.jsxs)(g.Z,{className:"InputCardTip",children:[(0,t.jsxs)(v.Z.Text,{style:{fontSize:13,color:$},children:[" ",G]}),(0,t.jsxs)(v.Z.Text,{style:{fontSize:13,color:$},children:[" ",M]})]})};return(0,t.jsxs)(a.Z,{spinning:Ie,children:[(0,t.jsxs)(g.Z,{gutter:[10,10],className:"hayMarginWrap",children:[(0,t.jsx)(h.Z,{span:24,className:"card",children:(0,t.jsx)(q.Z,{tokenList:ee,currentToken:o,onTokenChange:function(x){Re(x)},amount:B,onAmountChange:ye,minValue:0,type:"lpToken",maxValue:F,header:s==="add"?(0,t.jsxs)("div",{className:"label",children:[(0,t.jsx)("div",{children:"\xA0"}),(0,t.jsxs)("div",{children:["Balance:\xA0",(0,t.jsx)("span",{className:"linkColor",onClick:function(){return ye(F)},children:F})]})]}):(0,t.jsxs)("div",{className:"label",children:[(0,t.jsx)("div",{children:"\xA0"}),(0,t.jsxs)("div",{children:["Staked: ",(0,t.jsx)("span",{className:"linkColor",children:F})]})]})})}),(0,t.jsx)(h.Z,{children:(0,t.jsx)(v.Z.Paragraph,{children:(0,t.jsx)(v.Z.Text,{style:{color:$,fontSize:ie},children:"Stake ".concat(o.lpSymbol," to earn a ").concat(o.stakeApr," APR yield from OT fee distribution")})})}),(0,t.jsx)(h.Z,{span:24,children:(0,t.jsxs)("div",{style:{flexDirection:"column",color:$,background:pe,borderRadius:Te,padding:Ce,fontSize:ie},children:[(0,t.jsxs)(ne,{label:"Total Staked",children:[o.userTotalStaked," ",o.lpSymbol," token"]}),(0,t.jsx)(ne,{label:"Staking APR",children:o.stakeApr}),(0,t.jsxs)(ne,{label:"Your Staked Position",children:[o.userAccountStaked," ",o.lpSymbol]})]})}),(0,t.jsx)(h.Z,{span:24,children:(0,t.jsx)(Q.Z,{height:50,onClick:ze,conditions:[{condition:!!ve,text:ve,type:"default",onClick:function(){}},{condition:!B,text:"Enter Amount",type:"default",onClick:function(){}}],children:de(s==="add"?{id:"stake"}:{id:"unstake"})})})]}),Se&&(0,t.jsx)(_.Z,u()({},Se))]})},L=function(c){var y=c.defaultAction,s=S()(c,R),r=(0,d.useState)(),n=i()(r,2),m=n[0],A=n[1];return(0,d.useEffect)(function(){A(y)},[y]),(0,t.jsxs)(g.Z,{gutter:[10,10],className:"Stake-Comp",children:[(0,t.jsx)(h.Z,{span:"24",children:(0,t.jsx)(J.Z,{style:{width:"100%"},value:m,onChange:function(te){return A(te)},block:!0,options:[{label:(0,t.jsx)("div",{style:{padding:4},children:(0,t.jsx)("div",{children:"Stake"})}),value:"add"},{label:(0,t.jsx)("div",{style:{padding:4},children:(0,t.jsx)("div",{children:"Unstake"})}),value:"remove"}]})}),(0,t.jsx)(h.Z,{span:"24",style:{overflow:"hidden"},children:(0,t.jsxs)(g.Z,{wrap:!1,gutter:[20,20],style:{transform:"translateX(".concat(m==="add"?"0":"-100","%)"),transition:"transform .4s ease-in-out"},children:[(0,t.jsx)(h.Z,{span:"24",children:(0,t.jsx)(D,u()(u()({},u()({},s)),{},{actionType:"add"}))}),(0,t.jsx)(h.Z,{span:"24",children:(0,t.jsx)(D,u()(u()({},u()({},s)),{},{actionType:"remove"}))})]})})]})},k=function(c){var y=c.show,s=c.onClose,r=S()(c,Z);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(w.Z,{show:y,onClose:s,closable:!1,maskClosable:!0,children:(0,t.jsx)(L,u()({},r))})})},z=k}}]);
