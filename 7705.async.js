"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7705],{87705:function(ye,Z,e){e.r(Z),e.d(Z,{default:function(){return $}});var K=e(97857),m=e.n(K),X=e(5574),h=e.n(X),Y=e(75302),j=e(7075),y=e(71577),H=e(66477),B=e(76870),o={},d=e(41687),Q=e(36913),W=e(37373),D=e(80331),g=e(5593),O=e(83630),C=e(67294),n=e(85893),w=Y.ZP.useBreakpoint;function $(){var q=(0,d.useModel)("chain"),I=q.feeDistributionList,z=(0,d.useIntl)(),A=z.formatMessage,u=function(s){return A({id:s})},t=w(),p=t.md,_=(0,C.useState)(),ee=h()(_,2),N=ee[0],T=ee[1],te=(0,C.useState)(),E=h()(te,2),M=E[0],c=E[1],S=[{title:u("fee_distribution"),dataIndex:"name",key:"fee_distribution",render:function(s,a,l){return(0,n.jsxs)("div",{className:o.token,children:[l===0&&(0,n.jsx)("img",{src:W.Z})," ",(0,n.jsx)("span",{className:o.symbol,children:s})]})}}],f={conf:{cardName:(0,n.jsx)(j.Z.Text,{style:{fontSize:24,fontWeight:500},children:u("fee_distribution")}),rowKey:"name",header:{title:(0,n.jsx)(j.Z.Text,{style:{fontSize:16,fontWeight:500},children:u("fee_distribution")}),dataIndex:"name",key:"name",render:function(s,a,l){return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[l===0&&(0,n.jsx)(D.Z,{src:W.Z,tokenId:a.name}),(0,n.jsx)(j.Z.Text,{style:{fontSize:16,fontWeight:500,marginLeft:6},children:s})]})}},desc:[{title:u("total_staked"),dataIndex:"userTotalStaked",key:"total_staked",align:"right",render:function(s){return(0,n.jsx)(B.Z,{value:s})}},{title:u("your_stake"),dataIndex:"userAccountStaked",key:"your_stake",align:"right",render:function(s){return(0,n.jsx)(B.Z,{value:s})}},{title:u("apr"),dataIndex:"apr",key:"apr",align:"right"},{title:u("rewards")+(I[0]?"(".concat(I[0].time,")"):""),dataIndex:"userExpectedRewards",key:"userExpectedRewards",onCell:function(s,a){if(a===1)return{colSpan:0}}}],edit:[{title:u("unstake"),dataIndex:"unstake",key:"unstake",align:"center",render:function(s,a,l){return l===1?(0,n.jsxs)("span",{style:{fontSize:14,float:"right"},children:[u("boost_per")," ",a.per]}):a.name==="OT"?(0,n.jsxs)(y.Z,{type:p?"link":"primary",onClick:function(){T({show:!0,onClose:function(){T(void 0)},currentStake:a,defaultAction:"remove"})},disabled:parseFloat(a.userAccountStaked)<=0,children:[A({id:"stake"})," OT"]}):(0,n.jsx)(n.Fragment,{})},onCell:function(s,a){if(a===1)return{colSpan:4}}},{title:u("stake"),dataIndex:"stake_a",key:"stake_a",align:"center",render:function(s,a,l){return(0,n.jsx)(n.Fragment,{children:a.name==="OT"?(0,n.jsxs)(y.Z,{type:p?"link":"primary",onClick:function(){T({show:!0,onClose:function(){T(void 0)},currentStake:a,defaultAction:"add"})},children:[A({id:"stake"})," OT"]}):(0,n.jsx)(n.Fragment,{})})},onCell:function(s,a){if(a===1)return{colSpan:4}}},{title:u("withdraw"),dataIndex:"userRewards",key:"yield",align:"center",render:function(s,a){return a.name==="OT"?parseFloat(s)>0?(0,n.jsx)("div",{className:o.withdraw,children:(0,n.jsx)(H.Z,{title:"in ".concat(a.rewardSymbols.join(", "),"."),color:"#03CDC1",overlayClassName:o.tooltip,getPopupContainer:function(){return document.getElementById("J_Page")||document.body},children:(0,n.jsxs)(y.Z,{type:p?"link":"primary",onClick:function(){c({amount:s,onClose:function(){return c(void 0)},show:!0,current:a,title:"Distribution yield",type:"fee"})},children:["$",s]})})}):(0,n.jsx)(y.Z,{type:p?"link":"primary",disabled:!0,onClick:function(){},children:"--"}):(0,n.jsx)(n.Fragment,{})},onCell:function(s,a){if(a===1)return{colSpan:0}}}]},list:I};return(0,n.jsxs)("div",{className:"stakeTableWrap",children:[(0,n.jsx)(Q.Z,m()({},f)),N&&(0,C.createElement)(g.default,m()(m()({},N),{},{key:"fee"})),M&&(0,C.createElement)(O.default,m()(m()({},M),{},{key:"fee"}))]})}},5593:function(ye,Z,e){e.r(Z),e.d(Z,{default:function(){return E}});var K=e(13769),m=e.n(K),X=e(97857),h=e.n(X),Y=e(15009),j=e.n(Y),y=e(99289),H=e.n(y),B=e(5574),o=e.n(B),d=e(67294),Q=e(75302),W=e(92195),D=e(27790),g=e(71230),O=e(7075),C=e(57953),n=e(15746),w=e(8229),$=e(41687),q=e(12699),I=e(93417),z=e(6377),A=e(90494),u=e(21035),t=e(85893),p=["defaultAction"],_=["show","onClose"],ee=Q.ZP.useBreakpoint,N=function(c){var S=c.currentStake,f=c.actionType,r=(0,$.useModel)("chain"),s=r.chain,a=r.wallet,l=r.updateStake,L=r.stakeInfoList,P=W.Z.useToken(),R=P.token,ne=R.colorTextSecondary,ge=R.fontSizeSM,Ce=R.colorInfoBg,pe=R.borderRadius,Te=R.paddingSM,Ze=(0,$.useIntl)(),de=Ze.formatMessage;if(!s||!a)return(0,t.jsx)(t.Fragment,{});var Ie=(0,d.useState)(!1),ue=o()(Ie,2),Ae=ue[0],U=ue[1],Ne=(0,d.useState)(0),ce=o()(Ne,2),F=ce[0],Me=ce[1],Pe=(0,d.useState)(""),fe=o()(Pe,2),he=fe[0],Re=fe[1],Fe=(0,d.useState)(S),ve=o()(Fe,2),v=ve[0],Oe=ve[1],be=(0,d.useState)(),me=o()(be,2),$e=me[0],ze=me[1],Be=(0,d.useState)(),xe=o()(Be,2),Se=xe[0],G=xe[1],V=(0,d.useMemo)(function(){return Number(f==="remove"?v.userAccountStaked:v.userTokenBalance)},[f,v]);(0,d.useEffect)(function(){Re("")},[v,F]);var ke=function(x){Me(x)},We=function(){var k=H()(j()().mark(function x(){var J,b,se,re,je,oe,le,ie;return j()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(U(!0),f!=="add"){i.next=15;break}return i.next=4,(0,z.i$)({chain:s,wallet:a,stakeItem:v,amountIn:F});case 4:if(J=i.sent,b=o()(J,2),se=b[0],re=b[1],!re){i.next=12;break}return D.ZP.error(re.error),U(!1),i.abrupt("return");case 12:se&&G({show:!0,onClose:function(){G(void 0)},type:"addMargin",title:"Stake Success",hash:se.hash,okText:"Close"}),i.next=26;break;case 15:return i.next=17,(0,z.Oe)({chain:s,wallet:a,stakeItem:v,amountIn:F});case 17:if(je=i.sent,oe=o()(je,2),le=oe[0],ie=oe[1],!ie){i.next=25;break}return D.ZP.error(ie.error),U(!1),i.abrupt("return");case 25:le&&G({show:!0,onClose:function(){G(void 0)},type:"removeMargin",title:"Unstake Success",hash:le.hash,okText:"Close"});case 26:return i.next=28,l();case 28:U(!1);case 29:case"end":return i.stop()}},x)}));return function(){return k.apply(this,arguments)}}(),ae=function(x){var J=x.label,b=x.children;return(0,t.jsxs)(g.Z,{className:"InputCardTip",children:[(0,t.jsxs)(O.Z.Text,{style:{fontSize:13,color:ne},children:[" ",J]}),(0,t.jsxs)(O.Z.Text,{style:{fontSize:13,color:ne},children:[" ",b]})]})};return(0,t.jsxs)(C.Z,{spinning:Ae,children:[(0,t.jsxs)(g.Z,{gutter:[10,10],className:"hayMarginWrap",children:[(0,t.jsx)(n.Z,{span:24,className:"card",children:(0,t.jsx)(A.Z,{tokenList:[],currentToken:v,onTokenChange:function(x){},canSelectToken:!1,amount:F,onAmountChange:ke,minValue:0,maxValue:V,header:f==="add"?(0,t.jsxs)("div",{className:"label",children:[(0,t.jsx)("div",{children:"\xA0"}),(0,t.jsxs)("div",{children:["Balance:\xA0",(0,t.jsx)("span",{className:"linkColor",onClick:function(){return ke(V)},children:V})]})]}):(0,t.jsxs)("div",{className:"label",children:[(0,t.jsx)("div",{children:"\xA0"}),(0,t.jsxs)("div",{children:["Staked: ",(0,t.jsx)("span",{className:"linkColor",children:V})]})]})})}),(0,t.jsx)(n.Z,{span:24,children:(0,t.jsxs)("div",{style:{flexDirection:"column",color:ne,background:Ce,borderRadius:pe,padding:Te,fontSize:ge},children:[(0,t.jsxs)(ae,{label:"Total Staked",children:[v.userTotalStaked," OT token"]}),(0,t.jsx)(ae,{label:"Staking APR",children:v.apr}),(0,t.jsxs)(ae,{label:"Your Staked Position",children:[v.userAccountStaked," OT"]})]})}),(0,t.jsx)(n.Z,{span:24,children:(0,t.jsx)(q.Z,{height:50,onClick:We,conditions:[{condition:!!he,text:he,type:"default",onClick:function(){}},{condition:!F,text:"Enter Amount",type:"default",onClick:function(){}}],children:de(f==="add"?{id:"stake"}:{id:"unstake"})})})]}),Se&&(0,t.jsx)(u.Z,h()({},Se))]})},T=function(c){var S=c.defaultAction,f=m()(c,p),r=(0,d.useState)(),s=o()(r,2),a=s[0],l=s[1];return(0,d.useEffect)(function(){l(S)},[S]),(0,t.jsxs)(g.Z,{gutter:[10,10],className:"Stake-Comp",children:[(0,t.jsx)(n.Z,{span:"24",children:(0,t.jsx)(w.Z,{style:{width:"100%"},value:a,onChange:function(P){return l(P)},block:!0,options:[{label:(0,t.jsx)("div",{style:{padding:4},className:"SegmentedWrap",children:(0,t.jsx)("div",{children:"Stake"})}),value:"add"},{label:(0,t.jsx)("div",{style:{padding:4},className:"SegmentedWrap",children:(0,t.jsx)("div",{children:"Unstake"})}),value:"remove"}]})}),(0,t.jsx)(n.Z,{span:"24",style:{overflow:"hidden"},children:(0,t.jsxs)(g.Z,{wrap:!1,gutter:[20,20],style:{transform:"translateX(".concat(a==="add"?"0":"-100","%)"),transition:"transform .4s ease-in-out"},children:[(0,t.jsx)(n.Z,{span:"24",children:(0,t.jsx)(N,h()(h()({},h()({},f)),{},{actionType:"add"}))}),(0,t.jsx)(n.Z,{span:"24",children:(0,t.jsx)(N,h()(h()({},h()({},f)),{},{actionType:"remove"}))})]})})]})},te=function(c){var S=c.show,f=c.onClose,r=m()(c,_);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(I.Z,{show:S,onClose:f,closable:!1,maskClosable:!0,children:(0,t.jsx)(T,h()({},r))})})},E=te}}]);
