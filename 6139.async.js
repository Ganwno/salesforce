"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6139],{16139:function(ge,C,e){e.r(C),e.d(C,{default:function(){return D}});var X=e(97857),y=e.n(X),H=e(5574),f=e.n(H),J=e(75302),$=e(92195),T=e(7075),A=e(71577),Z=e(76870),d=e(41687),u=e(80331),Q=e(36913),w=e(37373),b=e(13596),g=e(83630),S=e(67294),a=e(85893),v=J.ZP.useBreakpoint,le=function(I){return I};function D(){var E=(0,d.useModel)("chain"),I=E.stakeInfoList,F=v(),M=F.md,q=$.Z.useToken(),t=q.token.colorInfoBg,_=(0,d.useIntl)(),h=_.formatMessage,ie=(0,S.useState)(),N=f()(ie,2),P=N[0],p=N[1],ee=(0,S.useState)(),B=f()(ee,2),o=B[0],m=B[1],c={conf:{cardName:(0,a.jsx)(T.Z.Text,{style:{fontSize:24,fontWeight:500},children:"Trade mining"}),rowKey:"id",header:{title:(0,a.jsx)(T.Z.Text,{style:{fontSize:16,fontWeight:500},children:h({id:"stake"})}),dataIndex:"stake",key:"stake",render:function(s,n){return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(u.Z,{src:n.iconLp,tokenId:n.id}),(0,a.jsx)(T.Z.Text,{style:{fontSize:16,fontWeight:500,marginLeft:6},children:n.lpSymbol})]})}},desc:[{title:h({id:"total_staked"}),dataIndex:"userTotalStaked",key:"userTotalStaked",align:"right",render:function(s,n){return(0,a.jsx)(Z.Z,{value:s,suffix:n.lpSymbol})}},{title:h({id:"your_stake"}),dataIndex:"userAccountStaked",key:"userAccountStaked",align:"right",render:function(s,n){return(0,a.jsx)(Z.Z,{value:s,suffix:n.lpSymbol})}},{title:"24".concat(h({id:"h_yield"})),dataIndex:"userDayStaked",key:"userDayStaked",align:"right",render:function(s){return(0,a.jsx)("div",{className:"yield_wrap",children:(0,a.jsxs)("div",{className:"yield",style:{background:t},children:[(0,a.jsx)("img",{src:w.Z,className:"yield_icon"}),(0,a.jsx)(Z.Z,{value:s})]})})}},{title:h({id:"apr"}),dataIndex:"stakeApr",key:"stakeApr",align:"right"}],edit:[{title:h({id:"unstake"}),dataIndex:"unstake",key:"unstake",align:"center",render:function(s,n){return(0,a.jsx)(A.Z,{type:M?"link":"primary",disabled:parseFloat(n.userAccountStaked)<=0,onClick:function(){p({show:!0,onClose:function(){p(void 0)},currentStake:n,defaultAction:"remove"})},children:h({id:"unstake"})})}},{title:h({id:"stake"}),dataIndex:"stake",key:"stake",align:"center",render:function(s,n){return(0,a.jsx)(A.Z,{type:M?"link":"primary",onClick:function(){p({show:!0,onClose:function(){p(void 0)},currentStake:n,defaultAction:"add"})},children:h({id:"stake"})})}},{title:"OT yield",dataIndex:"yield",key:"yield",align:"center",render:function(s,n){var x=n.userAccountYield;return(0,a.jsxs)(A.Z,{type:M?"link":"primary",disabled:parseFloat(n.userAccountStaked)<=0,onClick:function(){m({amount:x,onClose:function(){return m(void 0)},show:!0,current:n,title:"Staking Yield",type:"stake"})},children:[Number(x)||0," OT"]})}}]},list:I};return(0,a.jsxs)("div",{className:"stakeTableWrap",children:[(0,a.jsx)(Q.Z,y()({},c)),P&&(0,S.createElement)(b.default,y()(y()({},P),{},{key:P.currentStake.id})),o&&(0,S.createElement)(g.default,y()(y()({},o),{},{key:o.current&&o.current.id}))]})}},13596:function(ge,C,e){e.r(C),e.d(C,{default:function(){return ee}});var X=e(13769),y=e.n(X),H=e(97857),f=e.n(H),J=e(15009),$=e.n(J),T=e(99289),A=e.n(T),Z=e(5574),d=e.n(Z),u=e(67294),Q=e(75302),w=e(92195),b=e(27790),g=e(71230),S=e(7075),a=e(57953),v=e(15746),le=e(31530),D=e(41687),E=e(12699),I=e(93417),F=e(6377),M=e(90494),q=e(21035),t=e(85893),_=["defaultAction"],h=["show","onClose"],ie=Q.ZP.useBreakpoint,N=function(o){var m=o.currentStake,c=o.actionType,r=(0,D.useModel)("chain"),s=r.chain,n=r.wallet,x=r.updateStake,R=r.stakeInfoList,Y=w.Z.useToken(),L=Y.token,O=L.colorTextSecondary,de=L.fontSizeSM,pe=L.colorInfoBg,Ce=L.borderRadius,Te=L.paddingSM,Ae=(0,D.useIntl)(),ue=Ae.formatMessage;if(!s||!n)return(0,t.jsx)(t.Fragment,{});var Ze=(0,u.useState)(!1),ce=d()(Ze,2),Ie=ce[0],G=ce[1],Me=(0,u.useState)(0),fe=d()(Me,2),z=fe[0],Ne=fe[1],Pe=(0,u.useState)(""),he=d()(Pe,2),ve=he[0],Be=he[1],Re=(0,u.useState)(m),Se=d()(Re,2),l=Se[0],Le=Se[1],ze=(0,u.useState)(),me=d()(ze,2),De=me[0],Ee=me[1],We=(0,u.useState)(),xe=d()(We,2),ke=xe[0],K=xe[1],U=(0,u.useMemo)(function(){return Number(c==="remove"?l.userAccountStaked:l.userLpBalance)},[c,l]);(0,u.useEffect)(function(){Be("")},[l,z]);var ye=function(k){Ne(k)},$e=function(){var j=A()($()().mark(function k(){var V,W,ne,ae,je,se,re,oe;return $()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(G(!0),c!=="add"){i.next=15;break}return i.next=4,(0,F.LK)({chain:s,wallet:n,stakeItem:l,amountIn:z});case 4:if(V=i.sent,W=d()(V,2),ne=W[0],ae=W[1],!ae){i.next=12;break}return b.ZP.error(ae.error),G(!1),i.abrupt("return");case 12:ne&&K({show:!0,onClose:function(){K(void 0)},type:"addMargin",title:"Stake Success",hash:ne.hash,okText:"Close"}),i.next=26;break;case 15:return i.next=17,(0,F.fD)({chain:s,wallet:n,stakeItem:l,amountIn:z});case 17:if(je=i.sent,se=d()(je,2),re=se[0],oe=se[1],!oe){i.next=25;break}return b.ZP.error(oe.error),G(!1),i.abrupt("return");case 25:re&&K({show:!0,onClose:function(){K(void 0)},type:"removeMargin",title:"Unstake Success",hash:re.hash,okText:"Close"});case 26:return i.next=28,x();case 28:G(!1);case 29:case"end":return i.stop()}},k)}));return function(){return j.apply(this,arguments)}}(),te=function(k){var V=k.label,W=k.children;return(0,t.jsxs)(g.Z,{className:"InputCardTip",children:[(0,t.jsxs)(S.Z.Text,{style:{fontSize:13,color:O},children:[" ",V]}),(0,t.jsxs)(S.Z.Text,{style:{fontSize:13,color:O},children:[" ",W]})]})};return(0,t.jsxs)(a.Z,{spinning:Ie,children:[(0,t.jsxs)(g.Z,{gutter:[10,10],className:"hayMarginWrap",children:[(0,t.jsx)(v.Z,{span:24,className:"card",children:(0,t.jsx)(M.Z,{tokenList:R,currentToken:l,onTokenChange:function(k){Le(k)},amount:z,onAmountChange:ye,minValue:0,type:"lpToken",maxValue:U,header:c==="add"?(0,t.jsxs)("div",{className:"label",children:[(0,t.jsx)("div",{children:"\xA0"}),(0,t.jsxs)("div",{children:["Balance:\xA0",(0,t.jsx)("span",{className:"linkColor",onClick:function(){return ye(U)},children:U})]})]}):(0,t.jsxs)("div",{className:"label",children:[(0,t.jsx)("div",{children:"\xA0"}),(0,t.jsxs)("div",{children:["Staked: ",(0,t.jsx)("span",{className:"linkColor",children:U})]})]})})}),(0,t.jsx)(v.Z,{children:(0,t.jsx)(S.Z.Paragraph,{children:(0,t.jsx)(S.Z.Text,{style:{color:O,fontSize:de},children:"Stake ".concat(l.lpSymbol," to earn a ").concat(l.stakeApr," APR yield from OT fee distribution")})})}),(0,t.jsx)(v.Z,{span:24,children:(0,t.jsxs)("div",{style:{flexDirection:"column",color:O,background:pe,borderRadius:Ce,padding:Te,fontSize:de},children:[(0,t.jsxs)(te,{label:"Total Staked",children:[l.userTotalStaked," ",l.lpSymbol," token"]}),(0,t.jsx)(te,{label:"Staking APR",children:l.stakeApr}),(0,t.jsxs)(te,{label:"Your Staked Position",children:[l.userAccountStaked," ",l.lpSymbol]})]})}),(0,t.jsx)(v.Z,{span:24,children:(0,t.jsx)(E.Z,{height:50,onClick:$e,conditions:[{condition:!!ve,text:ve,type:"default",onClick:function(){}},{condition:!z,text:"Enter Amount",type:"default",onClick:function(){}}],children:ue(c==="add"?{id:"stake"}:{id:"unstake"})})})]}),ke&&(0,t.jsx)(q.Z,f()({},ke))]})},P=function(o){var m=o.defaultAction,c=y()(o,_),r=(0,u.useState)(),s=d()(r,2),n=s[0],x=s[1];return(0,u.useEffect)(function(){x(m)},[m]),(0,t.jsxs)(g.Z,{gutter:[10,10],className:"Stake-Comp",children:[(0,t.jsx)(v.Z,{span:"24",children:(0,t.jsx)(le.Z,{style:{width:"100%"},value:n,onChange:function(Y){return x(Y)},block:!0,options:[{label:(0,t.jsx)("div",{style:{padding:4},children:(0,t.jsx)("div",{children:"Stake"})}),value:"add"},{label:(0,t.jsx)("div",{style:{padding:4},children:(0,t.jsx)("div",{children:"Unstake"})}),value:"remove"}]})}),(0,t.jsx)(v.Z,{span:"24",style:{overflow:"hidden"},children:(0,t.jsxs)(g.Z,{wrap:!1,gutter:[20,20],style:{transform:"translateX(".concat(n==="add"?"0":"-100","%)"),transition:"transform .4s ease-in-out"},children:[(0,t.jsx)(v.Z,{span:"24",children:(0,t.jsx)(N,f()(f()({},f()({},c)),{},{actionType:"add"}))}),(0,t.jsx)(v.Z,{span:"24",children:(0,t.jsx)(N,f()(f()({},f()({},c)),{},{actionType:"remove"}))})]})})]})},p=function(o){var m=o.show,c=o.onClose,r=y()(o,h);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(I.Z,{show:m,onClose:c,closable:!1,maskClosable:!0,children:(0,t.jsx)(P,f()({},r))})})},ee=p}}]);
